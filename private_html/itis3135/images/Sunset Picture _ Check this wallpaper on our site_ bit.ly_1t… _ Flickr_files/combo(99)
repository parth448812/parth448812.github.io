YUI.add("moola-search-view",(function(e,a){require("hermes-core/flog")(a);var t=new e.SubscriptionsHelper;e.namespace("Views")["moola-search-view"]=e.Base.create("moola-search-view",e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){this.params=e},buildContainer:function(){var a,i,o=e.config.flickr.moola.positions.search[0],r=this.appContext.viewportData.getWidth(),n=e.config.flickr.moola.ad_breakpoint_mobile_desktop;a={adUnit:{a:o[r<n?"ad_unit_mobile_leaderboard":"ad_unit_desktop_a"],b:o[r<n?"ad_unit_mobile":"ad_unit_desktop_b"]}},i={adA:r<n?"moola-search-mob-ad-a":"moola-search-desk-ad-a",adB:r<n?"moola-search-mob-ad-b":"moola-search-desk-ad-b",container:r<n?"moola-search-mob-container":"moola-search-desk-container"},this.adUnit=a.adUnit,this.adEventStitch=this.appContext.adManager.getHashedAdValue(this.appContext.adManager.getAdPositioning(this.get("container"))),this.setContainerWithTemplate("moola-search-view",{adConfig:a,classes:i,advertisingStitching:this.adEventStitch,upgradeProLink:t.getProLandingPageUrl(t.UTM_HIDE_ADS)})},activate:function(){return this.setDataLayerForView(),this.appContext.adManager.refreshAdUnit(),this},setDataLayerForView:function(){this.appContext.dataLayer.setDataLayerProp("page.onsiteSearchTerm",this.params.searchTerm)}})}),"@VERSION@",{requires:["flickr-view","hermes-template-moola-search-view","subscriptions-helper"],optionalRequires:["hermes-core"],langBundles:["common","feed"]});YUI.add("hermes-template-getty-search",(function(l,n){var t=l.Template.Handlebars.revive({1:function(l,n,t,e,a,o,i){var r,c,u=null!=n?n:l.nullContext||{},s=l.hooks.helperMissing,p=l.escapeExpression,m="function",h=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return'<div class="main getty-search-div">\n\t<div class="sponsor-title-container">\n\t\t<p class="sponsor-title">'+p((h(t,"intlHTMLMessage")||n&&h(n,"intlHTMLMessage")||s).call(u,{name:"intlHTMLMessage",hash:{iStockLogo:null!=n?h(n,"iStockLogo"):n,assetRoot:null!=n?h(n,"assetRoot"):n,intlName:"common.SPONSORED_BY_ISTOCK"},data:a,loc:{start:{line:4,column:27},end:{line:4,column:126}}}))+'</p>\n\t\t<p class="sponsor-discount-code"><a href="'+p(typeof(c=null!=(c=h(t,"gettyPromoLink")||(null!=n?h(n,"gettyPromoLink"):n))?c:s)===m?c.call(u,{name:"gettyPromoLink",hash:{},data:a,loc:{start:{line:5,column:44},end:{line:5,column:62}}}):c)+'" target="_blank">'+p((h(t,"intlHTMLMessage")||n&&h(n,"intlHTMLMessage")||s).call(u,{name:"intlHTMLMessage",hash:{intlName:"common.GETTY_FLICKR_10_FREE"},data:a,loc:{start:{line:5,column:80},end:{line:5,column:138}}}))+'</a></p>\n\t</div>\n\t<div class="getty-search-main-container" style="height: '+p(l.lambda(null!=(r=null!=n?h(n,"layout"):n)?h(r,"containerHeight"):r,n))+'px;">\n'+(null!=(r=(h(t,"isFlipped")||n&&h(n,"isFlipped")||s).call(u,"enable-getty-view-more",{name:"isFlipped",hash:{},fn:l.program(2,a,0,o,i),inverse:l.program(8,a,0,o,i),data:a,loc:{start:{line:8,column:2},end:{line:29,column:16}}}))?r:"")+'\t</div>\n\t<div class="upgrade-pro-container">\n\t\t<p class="upgrade-to-pro-cta"><a href="'+p(typeof(c=null!=(c=h(t,"upgradeProLink")||(null!=n?h(n,"upgradeProLink"):n))?c:s)===m?c.call(u,{name:"upgradeProLink",hash:{},data:a,loc:{start:{line:32,column:41},end:{line:32,column:59}}}):c)+'">'+p((h(t,"intlMessage")||n&&h(n,"intlMessage")||s).call(u,{name:"intlMessage",hash:{intlName:"common.UPGRADE_PRO_HIDE_ADS"},data:a,loc:{start:{line:32,column:61},end:{line:32,column:115}}}))+"</a></p>\n\t</div>\n</div>\n"},2:function(l,n,t,e,a,o,i){var r,c=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return null!=(r=c(t,"each").call(null!=n?n:l.nullContext||{},null!=(r=null!=n?c(n,"layout"):n)?c(r,"boxes"):r,{name:"each",hash:{},fn:l.program(3,a,0,o,i),inverse:l.noop,data:a,loc:{start:{line:9,column:3},end:{line:23,column:12}}}))?r:""},3:function(l,n,t,e,a,o,i){var r,c=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return null!=(r=c(t,"if").call(null!=n?n:l.nullContext||{},a&&c(a,"last"),{name:"if",hash:{},fn:l.program(4,a,0,o,i),inverse:l.program(6,a,0,o,i),data:a,loc:{start:{line:10,column:4},end:{line:22,column:11}}}))?r:""},4:function(l,n,t,e,a,o,i){var r,c=null!=n?n:l.nullContext||{},u=l.hooks.helperMissing,s="function",p=l.escapeExpression,m=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return'\t\t\t\t\t<div class="last-result-container" style="height:'+p(typeof(r=null!=(r=m(t,"height")||(null!=n?m(n,"height"):n))?r:u)===s?r.call(c,{name:"height",hash:{},data:a,loc:{start:{line:11,column:54},end:{line:11,column:64}}}):r)+"px; width:"+p(typeof(r=null!=(r=m(t,"width")||(null!=n?m(n,"width"):n))?r:u)===s?r.call(c,{name:"width",hash:{},data:a,loc:{start:{line:11,column:74},end:{line:11,column:83}}}):r)+"px; top: "+p(typeof(r=null!=(r=m(t,"top")||(null!=n?m(n,"top"):n))?r:u)===s?r.call(c,{name:"top",hash:{},data:a,loc:{start:{line:11,column:92},end:{line:11,column:99}}}):r)+"px; left: "+p(typeof(r=null!=(r=m(t,"left")||(null!=n?m(n,"left"):n))?r:u)===s?r.call(c,{name:"left",hash:{},data:a,loc:{start:{line:11,column:109},end:{line:11,column:117}}}):r)+'px;">\n\t\t\t\t\t\t<a href="'+p(typeof(r=null!=(r=m(t,"url")||(null!=n?m(n,"url"):n))?r:u)===s?r.call(c,{name:"url",hash:{},data:a,loc:{start:{line:12,column:15},end:{line:12,column:22}}}):r)+'" target="_blank" data-g-url="'+p(typeof(r=null!=(r=m(t,"gettyImageUrl")||(null!=n?m(n,"gettyImageUrl"):n))?r:u)===s?r.call(c,{name:"gettyImageUrl",hash:{},data:a,loc:{start:{line:12,column:52},end:{line:12,column:69}}}):r)+'" data-g-index="'+p(typeof(r=null!=(r=m(t,"index")||a&&m(a,"index"))?r:u)===s?r.call(c,{name:"index",hash:{},data:a,loc:{start:{line:12,column:85},end:{line:12,column:95}}}):r)+'" class="getty-search-result last-result" style="position: absolute; background-image: url(\''+p(typeof(r=null!=(r=m(t,"displayUri")||(null!=n?m(n,"displayUri"):n))?r:u)===s?r.call(c,{name:"displayUri",hash:{},data:a,loc:{start:{line:12,column:187},end:{line:12,column:201}}}):r)+'\');background-size: cover;" title="'+p(typeof(r=null!=(r=m(t,"caption")||(null!=n?m(n,"caption"):n))?r:u)===s?r.call(c,{name:"caption",hash:{},data:a,loc:{start:{line:12,column:236},end:{line:12,column:247}}}):r)+'">\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<div class="view-more-overlay"></div>\n\t\t\t\t\t\t<a href="'+p(l.lambda(null!=i[1]?m(i[1],"viewMoreLink"):i[1],n))+'" target="_blank"  class="view-more-text">\n\t\t\t\t\t\t\t'+p((m(t,"intlMessage")||n&&m(n,"intlMessage")||u).call(c,{name:"intlMessage",hash:{intlName:"common.VIEW_MORE"},data:a,loc:{start:{line:16,column:7},end:{line:16,column:50}}}))+"\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n"},6:function(l,n,t,e,a){var o,i=null!=n?n:l.nullContext||{},r=l.hooks.helperMissing,c="function",u=l.escapeExpression,s=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return'\t\t\t\t\t<a href="'+u(typeof(o=null!=(o=s(t,"url")||(null!=n?s(n,"url"):n))?o:r)===c?o.call(i,{name:"url",hash:{},data:a,loc:{start:{line:20,column:14},end:{line:20,column:21}}}):o)+'" target="_blank" data-g-url="'+u(typeof(o=null!=(o=s(t,"gettyImageUrl")||(null!=n?s(n,"gettyImageUrl"):n))?o:r)===c?o.call(i,{name:"gettyImageUrl",hash:{},data:a,loc:{start:{line:20,column:51},end:{line:20,column:68}}}):o)+'" data-g-index="'+u(typeof(o=null!=(o=s(t,"index")||a&&s(a,"index"))?o:r)===c?o.call(i,{name:"index",hash:{},data:a,loc:{start:{line:20,column:84},end:{line:20,column:94}}}):o)+'" class="getty-search-result" style="position: absolute; display:block; background-image: url(\''+u(typeof(o=null!=(o=s(t,"displayUri")||(null!=n?s(n,"displayUri"):n))?o:r)===c?o.call(i,{name:"displayUri",hash:{},data:a,loc:{start:{line:20,column:189},end:{line:20,column:203}}}):o)+"');background-size: cover; height:"+u(typeof(o=null!=(o=s(t,"height")||(null!=n?s(n,"height"):n))?o:r)===c?o.call(i,{name:"height",hash:{},data:a,loc:{start:{line:20,column:237},end:{line:20,column:247}}}):o)+"px; width:"+u(typeof(o=null!=(o=s(t,"width")||(null!=n?s(n,"width"):n))?o:r)===c?o.call(i,{name:"width",hash:{},data:a,loc:{start:{line:20,column:257},end:{line:20,column:266}}}):o)+"px; top: "+u(typeof(o=null!=(o=s(t,"top")||(null!=n?s(n,"top"):n))?o:r)===c?o.call(i,{name:"top",hash:{},data:a,loc:{start:{line:20,column:275},end:{line:20,column:282}}}):o)+"px; left: "+u(typeof(o=null!=(o=s(t,"left")||(null!=n?s(n,"left"):n))?o:r)===c?o.call(i,{name:"left",hash:{},data:a,loc:{start:{line:20,column:292},end:{line:20,column:300}}}):o)+'px;" title="'+u(typeof(o=null!=(o=s(t,"caption")||(null!=n?s(n,"caption"):n))?o:r)===c?o.call(i,{name:"caption",hash:{},data:a,loc:{start:{line:20,column:312},end:{line:20,column:323}}}):o)+'">\n\t\t\t\t\t</a>\n'},8:function(l,n,t,e,a){var o,i=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return null!=(o=i(t,"each").call(null!=n?n:l.nullContext||{},null!=(o=null!=n?i(n,"layout"):n)?i(o,"boxes"):o,{name:"each",hash:{},fn:l.program(9,a,0),inverse:l.noop,data:a,loc:{start:{line:25,column:3},end:{line:28,column:12}}}))?o:""},9:function(l,n,t,e,a){var o,i=null!=n?n:l.nullContext||{},r=l.hooks.helperMissing,c="function",u=l.escapeExpression,s=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return'\t\t\t\t<a href="'+u(typeof(o=null!=(o=s(t,"url")||(null!=n?s(n,"url"):n))?o:r)===c?o.call(i,{name:"url",hash:{},data:a,loc:{start:{line:26,column:13},end:{line:26,column:20}}}):o)+'" target="_blank" data-g-url="'+u(typeof(o=null!=(o=s(t,"gettyImageUrl")||(null!=n?s(n,"gettyImageUrl"):n))?o:r)===c?o.call(i,{name:"gettyImageUrl",hash:{},data:a,loc:{start:{line:26,column:50},end:{line:26,column:67}}}):o)+'" data-g-index="'+u(typeof(o=null!=(o=s(t,"index")||a&&s(a,"index"))?o:r)===c?o.call(i,{name:"index",hash:{},data:a,loc:{start:{line:26,column:83},end:{line:26,column:93}}}):o)+'" class="getty-search-result" style="position: absolute; display:block; background-image: url(\''+u(typeof(o=null!=(o=s(t,"displayUri")||(null!=n?s(n,"displayUri"):n))?o:r)===c?o.call(i,{name:"displayUri",hash:{},data:a,loc:{start:{line:26,column:188},end:{line:26,column:202}}}):o)+"');background-size: cover; height:"+u(typeof(o=null!=(o=s(t,"height")||(null!=n?s(n,"height"):n))?o:r)===c?o.call(i,{name:"height",hash:{},data:a,loc:{start:{line:26,column:236},end:{line:26,column:246}}}):o)+"px; width:"+u(typeof(o=null!=(o=s(t,"width")||(null!=n?s(n,"width"):n))?o:r)===c?o.call(i,{name:"width",hash:{},data:a,loc:{start:{line:26,column:256},end:{line:26,column:265}}}):o)+"px; top: "+u(typeof(o=null!=(o=s(t,"top")||(null!=n?s(n,"top"):n))?o:r)===c?o.call(i,{name:"top",hash:{},data:a,loc:{start:{line:26,column:274},end:{line:26,column:281}}}):o)+"px; left: "+u(typeof(o=null!=(o=s(t,"left")||(null!=n?s(n,"left"):n))?o:r)===c?o.call(i,{name:"left",hash:{},data:a,loc:{start:{line:26,column:291},end:{line:26,column:299}}}):o)+'px;" title="'+u(typeof(o=null!=(o=s(t,"caption")||(null!=n?s(n,"caption"):n))?o:r)===c?o.call(i,{name:"caption",hash:{},data:a,loc:{start:{line:26,column:311},end:{line:26,column:322}}}):o)+'">\n\t\t\t\t</a>\n'},compiler:[8,">= 4.3.0"],main:function(l,n,t,e,a,o,i){var r,c=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return null!=(r=c(t,"if").call(null!=n?n:l.nullContext||{},null!=n?c(n,"apiFailed"):n,{name:"if",hash:{},fn:l.noop,inverse:l.program(1,a,0,o,i),data:a,loc:{start:{line:1,column:0},end:{line:35,column:7}}}))?r:""},useData:!0,useDepths:!0}),e={};l.Array.each([],(function(n){var t=l.Template.get("hermes/"+n);t&&(e[n]=t)})),l.Template.register("hermes/getty-search",(function(n,a){return(a=a||{}).partials=a.partials?l.merge(e,a.partials):e,t(n,a)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("getty-search-widget-view",(function(e,t){var i=new e.SubscriptionsHelper,r=require("justified-layout"),a=require("hermes-core/flog")(t);e.namespace("Views")["getty-search-widget-view"]=e.Base.create("getty-search-widget-view",e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){this.justifiedLayout=r,this.params=t,this.geo=t.geo,this.gettyHelper=new e.GettyHelper(this.appContext,this.params),this.iStockLogoLocation=e.config.flickr.urls.assetRoot+"/images/getty/IStock_corporate_logo.svg",this.utmTrackingOptions={promo:{campaign:"srp_photos_top",term:this.params.searchTerm,pageUrl:t.searchPageUrl,originalURL:"https://www.istockphoto.com/plans-and-pricing"},viewMore:{campaign:"srp_photos_viewmore",term:this.params.searchTerm,pageUrl:t.searchPageUrl,originalURL:"https://www.istockphoto.com/search/2/image",extraParams:`?mediatype=photography&phrase=${this.params.searchTerm}`},imageAsset:{campaign:"srp_photos_top",term:this.params.searchTerm,pageUrl:this.params.searchPageUrl,originalURL:""}}},loadState:function(){let t=this.params.geo&&this.params.geo.countryCode?this.params.geo.countryCode:e.config.flickr.geo.countryCode;return this.appContext.getModel("getty-search-models",{searchTerm:this.params.searchTerm,color:this.gettyHelper.getSearchColorHex(),orientations:this.gettyHelper.getSearchOrientation(),language:this.gettyHelper.getCorrectLangFormat(),countryCode:t}).then((t=>{this.gettyModel=t,this.apiFailed=!1,e.Snowplough&&e.Snowplough.sendStructuredEvent({category:this.params.searchTerm,action:"gettyResultsLoad",label:"getty-search"})})).catch((t=>{this.apiFailed=!0,e.Snowplough&&e.Snowplough.sendStructuredEvent({category:this.params.searchTerm,action:"gettyResultsFail",label:"getty-search"}),a.error("Error with fetching getty-search-models",{err:t})}))},buildLayout:function(){var e,t=this;let i=this.gettyModel.getValue("images"),r=80*this.appContext.viewportData.getWidth()/100;if(i){var a=i.map((function(e){return Math.min(Number(parseFloat(e.maxDimensions.width/e.maxDimensions.height).toFixed(2)),2)})),o=0,s=0,n=0;return this.appContext.flipper.isFlipped("enable-search-sidebar")&&this.appContext.viewportData.getWidth()>1080&&(r-=340),(e=t.justifiedLayout(a,{containerWidth:r,containerPadding:0,forceAspectRatio:1,boxSpacing:{horizontal:4,vertical:4},targetRowHeight:140,targetRowHeightTolerance:0})).boxes.some((function(t,i){s<t.top&&(s=t.top,++o>=1&&(n=n||i,e.containerHeight=e.containerHeight-t.height-4))})),n||(n=e.boxes.length),e.boxes=e.boxes.slice(0,n),e.boxes.forEach(((e,i)=>{var r=t.gettyModel.getValue("images")[i],a=this.utmTrackingOptions.imageAsset;a.originalURL=r.referenceUri,e.displayUri=r.displayUri,e.url=this.gettyHelper.appendGettyTracking(a),e.gettyImageUrl=r.referenceUri,e.caption=r.caption})),e}},buildContainer:function(){let e=this.apiFailed||YUI.Env.isServer?[]:this.buildLayout();return this.setContainerWithTemplate("getty-search",{apiFailed:this.apiFailed,layout:e,iStockLogo:this.iStockLogoLocation,gettyPromoLink:this.gettyHelper.appendGettyTracking(this.utmTrackingOptions.promo),upgradeProLink:i.getProLandingPageUrl(i.UTM_HIDE_ADS_GETTY_SEARCH),viewMoreLink:this.appContext.flipper.isFlipped("enable-getty-view-more")?this.gettyHelper.appendGettyTracking(this.utmTrackingOptions.viewMore):""}),this},activate:function(){return this.buildContainer(),this.registerEventHandler(this.get("container").delegate("click",this.onGettyResultClick.bind(this),".getty-search-result")),this.registerEventHandler(this.get("container").delegate("click",this.onDiscountCodeClick.bind(this),".sponsor-discount-code")),this.registerEventHandler(e.globalEvents.subscribe("window:resize",this.onResize.bind(this))),this},onResize:function(){this.buildContainer()},onGettyResultClick:function(t){let i=t.currentTarget;if(e.Snowplough&&i){let t=i.getAttribute("data-g-url"),r=parseInt(i.getAttribute("data-g-index"),10)+1;e.Snowplough.sendStructuredEvent({category:this.params.searchTerm,action:"gettyResultClick",label:"getty-search",property:t,value:r})}},onDiscountCodeClick:function(){e.Snowplough&&e.Snowplough.sendStructuredEvent({category:this.params.searchTerm,action:"gettyDiscountCodeClick",label:"getty-search"})}})}),"@VERSION@",{requires:["flickr-view","hermes-template-getty-search","getty-helper","getty-search-models"],optionalRequires:["hermes-core"],langBundles:["common"]});YUI.add("hermes-template-search-color-picker",(function(l,e){var n=l.Template.Handlebars.revive({1:function(l,e,n,a,o){var t=l.lookupProperty||function(l,e){if(Object.prototype.hasOwnProperty.call(l,e))return l[e]};return'\t<p class="option-header tabbable" tabindex="0">'+l.escapeExpression((t(n,"intlMessage")||e&&t(e,"intlMessage")||l.hooks.helperMissing).call(null!=e?e:l.nullContext||{},{name:"intlMessage",hash:{intlName:"search.COLOR"},data:o,loc:{start:{line:2,column:48},end:{line:2,column:87}}}))+"</p>\n"},3:function(l,e,n,a,o){var t,r,c=null!=e?e:l.nullContext||{},i=l.hooks.helperMissing,s="function",u=l.escapeExpression,m=l.lookupProperty||function(l,e){if(Object.prototype.hasOwnProperty.call(l,e))return l[e]};return'\t\t<li class="color-swatch'+(null!=(t=m(n,"if").call(c,null!=e?m(e,"useDarkCheckMark"):e,{name:"if",hash:{},fn:l.program(4,o,0),inverse:l.noop,data:o,loc:{start:{line:6,column:25},end:{line:6,column:67}}}))?t:"")+(null!=(t=m(n,"if").call(c,null!=e?m(e,"useOutline"):e,{name:"if",hash:{},fn:l.program(6,o,0),inverse:l.noop,data:o,loc:{start:{line:6,column:67},end:{line:6,column:100}}}))?t:"")+(null!=(t=m(n,"if").call(c,null!=e?m(e,"selected"):e,{name:"if",hash:{},fn:l.program(8,o,0),inverse:l.noop,data:o,loc:{start:{line:6,column:100},end:{line:6,column:131}}}))?t:"")+'" style="background-color: #'+u(typeof(r=null!=(r=m(n,"color")||(null!=e?m(e,"color"):e))?r:i)===s?r.call(c,{name:"color",hash:{},data:o,loc:{start:{line:6,column:159},end:{line:6,column:168}}}):r)+'" data-color-code="'+u(typeof(r=null!=(r=m(n,"colorCode")||(null!=e?m(e,"colorCode"):e))?r:i)===s?r.call(c,{name:"colorCode",hash:{},data:o,loc:{start:{line:6,column:187},end:{line:6,column:200}}}):r)+'" data-tooltip-title="'+u((m(n,"intlMessage")||e&&m(e,"intlMessage")||i).call(c,{name:"intlMessage",hash:{intlName:null!=e?m(e,"intlKey"):e},data:o,loc:{start:{line:6,column:222},end:{line:6,column:254}}}))+'" tabindex="0" role="button" aria-label="'+u((m(n,"intlMessage")||e&&m(e,"intlMessage")||i).call(c,{name:"intlMessage",hash:{intlName:null!=e?m(e,"intlKey"):e},data:o,loc:{start:{line:6,column:295},end:{line:6,column:327}}}))+'"></li>\n'},4:function(l,e,n,a,o){return" dark-check"},6:function(l,e,n,a,o){return" outline"},8:function(l,e,n,a,o){return" checked"},compiler:[8,">= 4.3.0"],main:function(l,e,n,a,o){var t,r=null!=e?e:l.nullContext||{},c=l.lookupProperty||function(l,e){if(Object.prototype.hasOwnProperty.call(l,e))return l[e]};return(null!=(t=c(n,"if").call(r,null!=e?c(e,"showTitle"):e,{name:"if",hash:{},fn:l.program(1,o,0),inverse:l.noop,data:o,loc:{start:{line:1,column:0},end:{line:3,column:7}}}))?t:"")+'<ul class="color-list">\n'+(null!=(t=c(n,"each").call(r,null!=e?c(e,"colors"):e,{name:"each",hash:{},fn:l.program(3,o,0),inverse:l.noop,data:o,loc:{start:{line:5,column:1},end:{line:7,column:10}}}))?t:"")+"</ul>\n"},useData:!0}),a={};l.Array.each([],(function(e){var n=l.Template.get("hermes/"+e);n&&(a[e]=n)})),l.Template.register("hermes/search-color-picker",(function(e,o){return(o=o||{}).partials=o.partials?l.merge(a,o.partials):a,n(e,o)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("search-color-picker-view",(function(e){var t=[{intlKey:"search.RED",color:"ff2000",colorCode:"0"},{intlKey:"search.DARK_ORANGE",color:"a24615",colorCode:"1"},{intlKey:"search.ORANGE",color:"ff7c00",colorCode:"2"},{intlKey:"search.PALE_PINK",color:"ff9f9c",colorCode:"b"},{intlKey:"search.LEMON_YELLOW",color:"fffa00",colorCode:"4",useDarkCheckMark:!0},{intlKey:"search.SCHOOL_BUS_YELLOW",color:"ffcf00",colorCode:"3",useDarkCheckMark:!0},{intlKey:"search.GREEN",color:"90e200",colorCode:"5"},{intlKey:"search.LIME_GREEN",color:"00ab00",colorCode:"6"},{intlKey:"search.CYAN",color:"00b2d4",colorCode:"7"},{intlKey:"search.BLUE",color:"0062c6",colorCode:"8"},{intlKey:"search.VIOLET",color:"8c20ba",colorCode:"9"},{intlKey:"search.PINK",color:"f52394",colorCode:"a"},{intlKey:"search.WHITE",color:"ffffff",colorCode:"c",useDarkCheckMark:!0,useOutline:!0},{intlKey:"search.GRAY",color:"7c7c7c",colorCode:"d"},{intlKey:"search.BLACK",color:"000000",colorCode:"e"}];e.namespace("Views")[this.name]=e.Base.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(r){var o,l=this;return this.searchUrl=r.searchUrl||new e.SearchUrl({},this.appContext,e.SearchUrl.searchTypes.PHOTOS),o=this.searchUrl.getAPIParam(e.SearchHelper.API.colorCodes),this.selectedColors=o?o.split(","):[],this.colors=[],t.forEach((function(t){l.colors.push(e.merge(t,{selected:-1!==l.selectedColors.indexOf(t.colorCode)}))})),this.showTitle=r.showTitle,this},loadState:function(){return e.Promise.resolve()},buildContainer:function(){return this.setContainerWithTemplate("search-color-picker",{showTitle:this.showTitle,colors:this.colors}),this.updateContainerDisabledState(),this},activate:function(){return this.registerEventHandler(this.get("container").delegate("click",this.handleColorSwatchClick.bind(this),".color-swatch")),this.registerEventHandler(this.get("container").delegate("key",this.handleColorSwatchClick.bind(this),"down:13",".color-swatch")),this},onParentViewEvent:function(e,t){if("search:blackandwhiteStyleSelected"===(t&&t.length&&t[0]))this.clearSelectedColors()},handleColorSwatchClick:function(e){var t=e.target.getData("color-code"),r=this.selectedColors.indexOf(t);if(e.halt(),-1===r){if(this.isContainerDisabled())return;this.selectedColors.push(t),e.target.addClass("checked"),this.updateContainerDisabledState(),this.fire("subviewViewEvent","search:colorSelected")}else this.selectedColors.splice(r,1),e.target.removeClass("checked"),this.updateContainerDisabledState();this.updateSearchUrl()},updateContainerDisabledState:function(){this.selectedColors.length>=5?this.get("container").addClass("disabled"):this.get("container").removeClass("disabled")},isContainerDisabled:function(){return!!this.get("container").hasClass("disabled")},updateSearchUrl:function(){this.searchUrl.clearColorCodes(),this.isDefaultValue()||this.searchUrl.setAPIParam(e.SearchHelper.API.colorCodes,this.selectedColors.join(",")),this.fire("subviewViewEvent","search:urlUpdate",this.searchUrl)},isDefaultValue:function(){return!(this.selectedColors&&this.selectedColors.length)},clearSelectedColors:function(){this.selectedColors=[],this.colors.forEach((function(e){e.selected=0})),this.buildContainer(),this.updateSearchUrl()}})}),"@VERSION@",{requires:["flickr-view","flickr-promise","hermes-template-search-color-picker","search-helper","search-url"],langBundles:["search"]});YUI.add("hermes-template-search-style-picker",(function(e,l){var n=e.Template.Handlebars.revive({1:function(e,l,n,a,t){var s=e.lookupProperty||function(e,l){if(Object.prototype.hasOwnProperty.call(e,l))return e[l]};return'\t<p class="option-header tabbable" tabindex="0">'+e.escapeExpression((s(n,"intlMessage")||l&&s(l,"intlMessage")||e.hooks.helperMissing).call(null!=l?l:e.nullContext||{},{name:"intlMessage",hash:{intlName:"search.STYLE_LABEL"},data:t,loc:{start:{line:2,column:48},end:{line:2,column:93}}}))+"</p>\n"},3:function(e,l,n,a,t){var s,r,o=null!=l?l:e.nullContext||{},i=e.hooks.helperMissing,c="function",u=e.escapeExpression,m=e.lookupProperty||function(e,l){if(Object.prototype.hasOwnProperty.call(e,l))return e[l]};return'\t\t<li class="style-button '+u(typeof(r=null!=(r=m(n,"cssClass")||(null!=l?m(l,"cssClass"):l))?r:i)===c?r.call(o,{name:"cssClass",hash:{},data:t,loc:{start:{line:6,column:26},end:{line:6,column:38}}}):r)+(null!=(s=m(n,"if").call(o,null!=l?m(l,"useDarkCheckMark"):l,{name:"if",hash:{},fn:e.program(4,t,0),inverse:e.noop,data:t,loc:{start:{line:6,column:38},end:{line:6,column:80}}}))?s:"")+(null!=(s=m(n,"if").call(o,null!=l?m(l,"selected"):l,{name:"if",hash:{},fn:e.program(6,t,0),inverse:e.noop,data:t,loc:{start:{line:6,column:80},end:{line:6,column:111}}}))?s:"")+'" data-style-value="'+u(typeof(r=null!=(r=m(n,"value")||(null!=l?m(l,"value"):l))?r:i)===c?r.call(o,{name:"value",hash:{},data:t,loc:{start:{line:6,column:131},end:{line:6,column:140}}}):r)+'" data-tooltip-title="'+u((m(n,"intlMessage")||l&&m(l,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:null!=l?m(l,"intlKey"):l},data:t,loc:{start:{line:6,column:162},end:{line:6,column:194}}}))+'" tabindex="0" role="button" aria-label="'+u((m(n,"intlMessage")||l&&m(l,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:null!=l?m(l,"intlKey"):l},data:t,loc:{start:{line:6,column:235},end:{line:6,column:267}}}))+'">\n\t\t\t<div class="style-image"></div>\n\t\t</li>\n'},4:function(e,l,n,a,t){return" dark-check"},6:function(e,l,n,a,t){return" checked"},compiler:[8,">= 4.3.0"],main:function(e,l,n,a,t){var s,r=null!=l?l:e.nullContext||{},o=e.lookupProperty||function(e,l){if(Object.prototype.hasOwnProperty.call(e,l))return e[l]};return(null!=(s=o(n,"if").call(r,null!=l?o(l,"showTitle"):l,{name:"if",hash:{},fn:e.program(1,t,0),inverse:e.noop,data:t,loc:{start:{line:1,column:0},end:{line:3,column:7}}}))?s:"")+'<ul class="style-list">\n'+(null!=(s=o(n,"each").call(r,null!=l?o(l,"styles"):l,{name:"each",hash:{},fn:e.program(3,t,0),inverse:e.noop,data:t,loc:{start:{line:5,column:1},end:{line:9,column:10}}}))?s:"")+"</ul>\n"},useData:!0}),a={};e.Array.each([],(function(l){var n=e.Template.get("hermes/"+l);n&&(a[l]=n)})),e.Template.register("hermes/search-style-picker",(function(l,t){return(t=t||{}).partials=t.partials?e.merge(a,t.partials):a,n(l,t)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("search-style-picker-view",(function(e){var t=[{intlKey:"search.BLACK_AND_WHITE",value:"blackandwhite",cssClass:"black-and-white"},{intlKey:"search.DEPTH_OF_FIELD",value:"depthoffield",cssClass:"depth-of-field"},{intlKey:"search.MINIMALIST",value:"minimalism",cssClass:"minimalist"},{intlKey:"search.PATTERNS",value:"pattern",cssClass:"patterns"}];e.namespace("Views")[this.name]=e.Base.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(s){var l,i=this;return this.searchUrl=s.searchUrl||new e.SearchUrl({},this.appContext,e.SearchUrl.searchTypes.PHOTOS),l=this.searchUrl.getAPIParam(e.SearchHelper.API.styles),this.selectedStyles=l?l.split(","):[],this.styles=[],t.forEach((function(t){i.styles.push(e.merge(t,{selected:-1!==i.selectedStyles.indexOf(t.value)}))})),this.showTitle=s.showTitle,this},loadState:function(){return e.Promise.resolve()},buildContainer:function(){return this.setContainerWithTemplate("search-style-picker",{showTitle:this.showTitle,styles:this.styles}),this},activate:function(){var e=this.get("container");return this.registerEventHandler(e.delegate("click",this.handleFilterClick.bind(this),".style-button")),this.registerEventHandler(e.delegate("key",this.handleFilterClick.bind(this),"down:13",".style-button")),this},onParentViewEvent:function(e,t){if("search:colorSelected"===(t&&t.length&&t[0]))this.clearSelectedStyle("blackandwhite")},handleFilterClick:function(e){var t=e.target.ancestor(".style-button",!0),s=t.getData("style-value"),l=this.selectedStyles.indexOf(s),i=this.styles.find(((e,t)=>e.value===s));e.halt(),-1===l?(this.selectedStyles.push(s),t.addClass("checked"),i&&(i.selected=!0),"blackandwhite"===s&&this.fire("subviewViewEvent","search:blackandwhiteStyleSelected")):(this.selectedStyles.splice(l,1),t.removeClass("checked"),i&&(i.selected=!1)),this.updateSearchUrl()},updateSearchUrl:function(){this.isDefaultValue()?this.searchUrl.removeAPIParam(e.SearchHelper.API.styles):this.searchUrl.setAPIParam(e.SearchHelper.API.styles,this.selectedStyles.join(",")),this.fire("subviewViewEvent","search:urlUpdate",this.searchUrl)},isDefaultValue:function(){return!(this.selectedStyles&&this.selectedStyles.length)},clearSelectedStyle:function(e){var t=this.selectedStyles.indexOf(e);-1!==t&&(this.selectedStyles.splice(t,1),this.styles.some((function(t){if(t.value===e)return t.selected=0,!0}))),this.buildContainer(),this.updateSearchUrl()}})}),"@VERSION@",{requires:["flickr-view","flickr-promise","hermes-template-search-style-picker","search-helper","search-url"],langBundles:["search"]});