YUI.add("hermes-template-search-date-picker",(function(e,a){var n=e.Template.Handlebars.revive({1:function(e,a,n,l,t){return" compact"},compiler:[8,">= 4.3.0"],main:function(e,a,n,l,t){var s,i,r=null!=a?a:e.nullContext||{},o=e.hooks.helperMissing,c=e.escapeExpression,d=e.lookupProperty||function(e,a){if(Object.prototype.hasOwnProperty.call(e,a))return e[a]};return'<div class="dropdown-link date-mode-menu tabbable" tabindex="-1"><p class="option-header">'+c("function"==typeof(i=null!=(i=d(n,"dateMode")||(null!=a?d(a,"dateMode"):a))?i:o)?i.call(r,{name:"dateMode",hash:{},data:t,loc:{start:{line:1,column:90},end:{line:1,column:102}}}):i)+'</p><span class="dropdown-arrow" aria-haspopup="true" aria-expanded="false"></span></div>\n<div class="date-inputs'+(null!=(s=d(n,"if").call(r,null!=a?d(a,"isCompact"):a,{name:"if",hash:{},fn:e.program(1,t,0),inverse:e.noop,data:t,loc:{start:{line:2,column:23},end:{line:2,column:55}}}))?s:"")+'">\n  <div class="date-input-container">\n    <label>'+c((d(n,"intlMessage")||a&&d(a,"intlMessage")||o).call(r,{name:"intlMessage",hash:{intlName:"common.FROM"},data:t,loc:{start:{line:4,column:11},end:{line:4,column:49}}}))+'</label>\n    <input type="text" id="date-from" class="date-picker tabbable" placeholder="'+c((d(n,"intlMessage")||a&&d(a,"intlMessage")||o).call(r,{name:"intlMessage",hash:{intlName:"pika-day.DATE_FORMAT"},data:t,loc:{start:{line:5,column:80},end:{line:5,column:127}}}))+'" tabindex="0" />\n  </div>\n  <div class="date-input-container">\n    <label>'+c((d(n,"intlMessage")||a&&d(a,"intlMessage")||o).call(r,{name:"intlMessage",hash:{intlName:"search.TO"},data:t,loc:{start:{line:8,column:11},end:{line:8,column:47}}}))+'</label>\n    <input type="text" id="date-to" class="date-picker tabbable" placeholder="'+c((d(n,"intlMessage")||a&&d(a,"intlMessage")||o).call(r,{name:"intlMessage",hash:{intlName:"pika-day.DATE_FORMAT"},data:t,loc:{start:{line:9,column:78},end:{line:9,column:125}}}))+'" tabindex="0" />\n  </div>\n</div>\n'},useData:!0}),l={};e.Array.each([],(function(a){var n=e.Template.get("hermes/"+a);n&&(l[a]=n)})),e.Template.register("hermes/search-date-picker",(function(a,t){return(t=t||{}).partials=t.partials?e.merge(l,t.partials):l,n(a,t)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("search-date-picker-view",(function(e){var t=[{intlKey:"search.DATE_TAKEN",value:"taken",isDefault:!0},{intlKey:"search.DATE_UPLOADED",value:"upload"}];e.namespace("Views")[this.name]=e.Base.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(a){var i,s,n,l,r,o=this;return this.searchUrl=a.searchUrl||new e.SearchUrl({},this.appContext,e.SearchUrl.searchTypes.PHOTOS),this.isCompact=a.isCompact,i=this.searchUrl.getAPIParam(e.SearchHelper.API.minTakenDate),s=this.searchUrl.getAPIParam(e.SearchHelper.API.maxTakenDate),n=this.searchUrl.getAPIParam(e.SearchHelper.API.minUploadDate),l=this.searchUrl.getAPIParam(e.SearchHelper.API.maxUploadDate),this.closeOnScrollDistance=40,this.dateModes=[],t.forEach((function(t){r=e.merge(t,{text:o.intlMessage({intlName:t.intlKey})}),i||s?"taken"===r.value&&(o.set("selectedDateMode",r.value),o.set("selectedDateModeText",r.text)):n||l?"upload"===r.value&&(o.set("selectedDateMode",r.value),o.set("selectedDateModeText",r.text)):r.isDefault&&(o.set("selectedDateMode",r.value),o.set("selectedDateModeText",r.text)),o.dateModes.push(r)})),i||s?(this.set("selectedDateFrom",i),this.set("selectedDateTo",s)):(n||l)&&(this.set("selectedDateFrom",n),this.set("selectedDateTo",l)),this.dateIntl={previousMonth:this.intlMessage({intlName:"pika-day.PREVIOUS_MONTH"}),nextMonth:this.intlMessage({intlName:"pika-day.NEXT_MONTH"})},this.dateIntl.weekdays=[this.intlMessage({intlName:"pika-day.SUNDAY"}),this.intlMessage({intlName:"pika-day.MONDAY"}),this.intlMessage({intlName:"pika-day.TUESDAY"}),this.intlMessage({intlName:"pika-day.WEDNESDAY"}),this.intlMessage({intlName:"pika-day.THURSDAY"}),this.intlMessage({intlName:"pika-day.FRIDAY"}),this.intlMessage({intlName:"pika-day.SATURDAY"})],this.dateIntl.weekdaysShort=[this.intlMessage({intlName:"pika-day.SUNDAY_SHORT"}),this.intlMessage({intlName:"pika-day.MONDAY_SHORT"}),this.intlMessage({intlName:"pika-day.TUESDAY_SHORT"}),this.intlMessage({intlName:"pika-day.WEDNESDAY_SHORT"}),this.intlMessage({intlName:"pika-day.THURSDAY_SHORT"}),this.intlMessage({intlName:"pika-day.FRIDAY_SHORT"}),this.intlMessage({intlName:"pika-day.SATURDAY_SHORT"})],this.dateIntl.months=[this.intlMessage({intlName:"pika-day.JANUARY"}),this.intlMessage({intlName:"pika-day.FEBRUARY"}),this.intlMessage({intlName:"pika-day.MARCH"}),this.intlMessage({intlName:"pika-day.APRIL"}),this.intlMessage({intlName:"pika-day.MAY"}),this.intlMessage({intlName:"pika-day.JUNE"}),this.intlMessage({intlName:"pika-day.JULY"}),this.intlMessage({intlName:"pika-day.AUGUST"}),this.intlMessage({intlName:"pika-day.SEPTEMBER"}),this.intlMessage({intlName:"pika-day.OCTOBER"}),this.intlMessage({intlName:"pika-day.NOVEMBER"}),this.intlMessage({intlName:"pika-day.DECEMBER"})],this.basePikadayOptions={i18n:this.dateIntl,reposition:!0,format:this.intlMessage({intlName:"pika-day.DATE_FORMAT"}),yearRange:[1826,(new Date).getFullYear()],onSelect:this.handleDateChange.bind(this),onOpen:function(){o.observePickerPageScroll(this)},onClose:function(){o.detachPickerPageScroll(this)}},this},loadState:function(){return e.Promise.resolve()},buildContainer:function(){return this.setContainerWithTemplate("search-date-picker",{dateMode:this.get("selectedDateModeText"),isCompact:this.isCompact}),this},activate:function(){this.setupDatePickers();var e=this.get("container").one(".date-mode-menu");return this.registerEventHandler(e.on("click",this.handleDateModeMenuClick.bind(this))),this.registerEventHandler(e.on("key",this.handleDateModeMenuClick.bind(this),"down:13")),this.registerEventHandler(this.get("container").delegate("change",this.handleDateInputFieldChange.bind(this),".date-picker")),this},setupDatePickers:function(){var t=this.get("selectedDateFrom"),a=this.get("selectedDateTo");this.datePickers={},this.datePickers.from=new e.Pikaday(e.merge(this.basePikadayOptions,{field:this.get("container").one("#date-from.date-picker").getDOMNode(),defaultDate:t?new Date(1e3*parseInt(t)):null,setDefaultDate:!!t,position:"bottom left"})),this.datePickers.from.el.classList.add("search-from-pikaday"),this.datePickers.to=new e.Pikaday(e.merge(this.basePikadayOptions,{field:this.get("container").one("#date-to.date-picker").getDOMNode(),defaultDate:a?new Date(1e3*parseInt(a)):null,setDefaultDate:!!a,position:"bottom right"})),this.datePickers.to.el.classList.add("search-to-pikaday")},handleDateModeMenuClick:function(t){var a=this;t.halt(),this.dropdown=new e.Views.FluidDroparound({appContext:this.appContext,showDropArrow:!0,observePageResize:!0,anchorElement:this.get("container").one(".dropdown-arrow"),keyboardAnchorElement:this.get("container").one(".dropdown-link"),positionFixed:!0,closeOnScroll:!0,preferLeft:!0,menuItems:this.dateModes}),this.dropdown.show(),this.registerEventHandler(this.dropdown.on("selected",(function(e){e&&e.menuItem&&e.menuItem.value!==a.get("selectedDateMode")&&(a.set("selectedDateMode",e.menuItem.value),a.set("selectedDateModeText",e.menuItem.text),a.get("container").one(".date-mode-menu p").set("text",a.get("selectedDateModeText")),a.isDefaultValue()||a.processUpdate()),a.dropdown.close()})))},handleDateInputFieldChange:function(e){e.halt(),e.target.get("value")||this.handleDateChange()},handleDateChange:function(){var e,t=this.datePickers.from.toString("X");this.datePickers.to.getDate()&&(e=this.datePickers.to.getMoment().add({hours:23,minutes:59,seconds:59}).format("X")),t===this.get("selectedDateFrom")&&e===this.get("selectedDateTo")||(this.set("selectedDateFrom",t),this.set("selectedDateTo",e),this.processUpdate())},processUpdate:function(){var t=this.get("selectedDateMode"),a=this.get("selectedDateFrom"),i=this.get("selectedDateTo"),s="upload"===t?e.SearchHelper.API.minUploadDate:e.SearchHelper.API.minTakenDate,n="upload"===t?e.SearchHelper.API.maxUploadDate:e.SearchHelper.API.maxTakenDate;this.searchUrl.removeAPIParam(e.SearchHelper.API.minTakenDate),this.searchUrl.removeAPIParam(e.SearchHelper.API.maxTakenDate),this.searchUrl.removeAPIParam(e.SearchHelper.API.minUploadDate),this.searchUrl.removeAPIParam(e.SearchHelper.API.maxUploadDate),this.isDefaultValue()||(a&&this.searchUrl.setAPIParam(s,a),i&&this.searchUrl.setAPIParam(n,i)),this.fire("subviewViewEvent","search:urlUpdate",this.searchUrl)},isDefaultValue:function(){return!(this.get("selectedDateFrom")||this.get("selectedDateTo"))},observePickerPageScroll:function(t){let a;t&&(this.scrollContainer?(a=this.scrollContainer.get("scrollTop"),this.set("startingScrollPoint",a),t.handlerID=this.registerEventHandler(this.scrollContainer.on("scroll",e.betterThrottle((e=>{this.handleScroll.call(this,e,t,this.scrollContainer)}),100,this,!1)))):(a=YUI.Env.isServer?0:e.config.win.pageYOffset,this.set("startingScrollPoint",a),t.handlerID=this.registerEventHandler(e.globalEvents.subscribe("window:scroll",(a=>{this.handleScroll.call(this,a,t,e.Node(document.scrollingElement))})))))},detachPickerPageScroll:function(e){var t;e&&(t=e.handlerID)&&this.detachRegisteredEvent(t)},handleScroll:function(e,t,a){var i,s=this.get("startingScrollPoint");s?(i=a.get("scrollTop"),(s+this.closeOnScrollDistance<i||s-this.closeOnScrollDistance>i)&&t.hide()):this.set("startingScrollPoint",a.get("scrollTop"))},setScrollContainer:function(e){this.scrollContainer=e}})}),"@VERSION@",{requires:["flickr-view","flickr-promise","fluid-droparound-view","hermes-template-search-date-picker","search-helper","search-url"],langBundles:["common","search","pika-day"]});YUI.add("hermes-template-search-slender-advanced-panel",(function(e,n){var t=e.Template.Handlebars.revive({1:function(e,n,t,l,a){var o,c=null!=n?n:e.nullContext||{},s=e.hooks.helperMissing,i=e.escapeExpression,r=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return'\t<div class="advanced-panel">\n\n\t\t<div class="fluid-centered">\n\t\t\t<div class="quick-filter">\n\n\t\t\t\t'+i((r(t,"outlet")||n&&r(n,"outlet")||s).call(c,null!=n?r(n,"search-color-picker-view"):n,{name:"outlet",hash:{},data:a,loc:{start:{line:8,column:4},end:{line:8,column:39}}}))+"\n\n\t\t\t\t"+i((r(t,"outlet")||n&&r(n,"outlet")||s).call(c,null!=n?r(n,"search-style-picker-view"):n,{name:"outlet",hash:{},data:a,loc:{start:{line:10,column:4},end:{line:10,column:39}}}))+'\n\n\t\t\t</div>\n\t\t\t<div class="advanced-toggle">\n\t\t\t\t<a class=\'tertiary\' title="'+i((r(t,"intlHTMLMessage")||n&&r(n,"intlHTMLMessage")||s).call(c,{name:"intlHTMLMessage",hash:{intlName:"search.TOGGLE_ADVANCED"},data:a,loc:{start:{line:14,column:31},end:{line:14,column:84}}}))+'" href="#" data-track="search-toggle-advanced" aria-haspopup="true" aria-expanded="false">'+i((r(t,"intlHTMLMessage")||n&&r(n,"intlHTMLMessage")||s).call(c,{name:"intlHTMLMessage",hash:{intlName:"search.ADVANCED"},data:a,loc:{start:{line:14,column:174},end:{line:14,column:220}}}))+'<span class="advanced-icon'+(null!=(o=r(t,"if").call(c,null!=n?r(n,"collapseAdvancedOptions"):n,{name:"if",hash:{},fn:e.program(2,a,0),inverse:e.noop,data:a,loc:{start:{line:14,column:246},end:{line:14,column:294}}}))?o:"")+'"></span></a>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="advanced-options fluid-centered'+(null!=(o=r(t,"if").call(c,null!=n?r(n,"collapseAdvancedOptions"):n,{name:"if",hash:{},fn:e.program(2,a,0),inverse:e.noop,data:a,loc:{start:{line:18,column:45},end:{line:18,column:93}}}))?o:"")+'">\n\n\t\t\t'+i((r(t,"outlet")||n&&r(n,"outlet")||s).call(c,null!=n?r(n,"search-orientation-picker-view"):n,{name:"outlet",hash:{},data:a,loc:{start:{line:20,column:3},end:{line:20,column:44}}}))+"\n\n\t\t\t"+i((r(t,"outlet")||n&&r(n,"outlet")||s).call(c,null!=n?r(n,"search-min-size-picker-view"):n,{name:"outlet",hash:{},data:a,loc:{start:{line:22,column:3},end:{line:22,column:41}}}))+"\n\n\t\t\t"+i((r(t,"outlet")||n&&r(n,"outlet")||s).call(c,null!=n?r(n,"search-date-picker-view"):n,{name:"outlet",hash:{},data:a,loc:{start:{line:24,column:3},end:{line:24,column:37}}}))+"\n\n\t\t\t"+i((r(t,"outlet")||n&&r(n,"outlet")||s).call(c,null!=n?r(n,"search-content-filter-view"):n,{name:"outlet",hash:{},data:a,loc:{start:{line:26,column:3},end:{line:26,column:40}}}))+"\n\n\t\t\t"+i((r(t,"outlet")||n&&r(n,"outlet")||s).call(c,null!=n?r(n,"search-search-in-picker-view"):n,{name:"outlet",hash:{},data:a,loc:{start:{line:28,column:3},end:{line:28,column:42}}}))+"\n\n\t\t</div>\n\n\t</div>\n"},2:function(e,n,t,l,a){return" collapsed"},compiler:[8,">= 4.3.0"],main:function(e,n,t,l,a){var o,c=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return"\n"+(null!=(o=c(t,"unless").call(null!=n?n:e.nullContext||{},null!=n?c(n,"showToolbarOnly"):n,{name:"unless",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a,loc:{start:{line:2,column:0},end:{line:33,column:11}}}))?o:"")},useData:!0}),l={};e.Array.each([],(function(n){var t=e.Template.get("hermes/"+n);t&&(l[n]=t)})),e.Template.register("hermes/search-slender-advanced-panel",(function(n,a){return(a=a||{}).partials=a.partials?e.merge(l,a.partials):l,t(n,a)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-search-content-filter",(function(e,a){var t=e.Template.Handlebars.revive({compiler:[8,">= 4.3.0"],main:function(e,a,t,r,n){var l=e.lookupProperty||function(e,a){if(Object.prototype.hasOwnProperty.call(e,a))return e[a]};return'<p class="option-header tabbable" tabindex="0">'+e.escapeExpression((l(t,"intlMessage")||a&&l(a,"intlMessage")||e.hooks.helperMissing).call(null!=a?a:e.nullContext||{},{name:"intlMessage",hash:{intlName:"search.CONTENT"},data:n,loc:{start:{line:1,column:47},end:{line:1,column:88}}}))+"</p>\n"},useData:!0}),r={};e.Array.each([],(function(a){var t=e.Template.get("hermes/"+a);t&&(r[a]=t)})),e.Template.register("hermes/search-content-filter",(function(a,n){return(n=n||{}).partials=n.partials?e.merge(r,n.partials):r,t(a,n)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-fluid-selection-dropdown",(function(n,t){var e=n.Template.Handlebars.revive({1:function(n,t,e,l,a){var o,i,r=null!=t?t:n.nullContext||{},c=n.hooks.helperMissing,s="function",u=n.escapeExpression,d=n.lookupProperty||function(n,t){if(Object.prototype.hasOwnProperty.call(n,t))return n[t]};return'\t\t\t<div class="radio individual-option-container option-'+u(typeof(i=null!=(i=d(e,"id")||(null!=t?d(t,"id"):t))?i:c)===s?i.call(r,{name:"id",hash:{},data:a,loc:{start:{line:15,column:56},end:{line:15,column:62}}}):i)+'" data-id="'+u(typeof(i=null!=(i=d(e,"id")||(null!=t?d(t,"id"):t))?i:c)===s?i.call(r,{name:"id",hash:{},data:a,loc:{start:{line:15,column:73},end:{line:15,column:79}}}):i)+'">\n\t\t\t\t<input class="options-check-box" type="checkbox" '+(null!=(o=d(e,"if").call(r,null!=t?d(t,"isSelected"):t,{name:"if",hash:{},fn:n.program(2,a,0),inverse:n.noop,data:a,loc:{start:{line:16,column:53},end:{line:16,column:85}}}))?o:"")+' data-id="'+u(typeof(i=null!=(i=d(e,"id")||(null!=t?d(t,"id"):t))?i:c)===s?i.call(r,{name:"id",hash:{},data:a,loc:{start:{line:16,column:95},end:{line:16,column:101}}}):i)+'"/>\n\t\t\t\t<label class="value-container">\n\t\t\t\t\t<div class="square"></div>\n\t\t\t\t\t<span class="option-value">'+u(typeof(i=null!=(i=d(e,"name")||(null!=t?d(t,"name"):t))?i:c)===s?i.call(r,{name:"name",hash:{},data:a,loc:{start:{line:19,column:32},end:{line:19,column:40}}}):i)+"</span>\n\t\t\t\t</label>\n\t\t\t</div>\n"},2:function(n,t,e,l,a){return"checked"},compiler:[8,">= 4.3.0"],main:function(n,t,e,l,a){var o,i,r=null!=t?t:n.nullContext||{},c=n.lookupProperty||function(n,t){if(Object.prototype.hasOwnProperty.call(n,t))return n[t]};return'<div class="fluid-selection-overlay-container"></div>\n<div class="fluid-selection-dropdown-container">\n\t<div class="fluid-selection-current-value-container">\n\t\t<div class="current-value-container">\n\t\t\t<p class="current-value">\n\t\t\t\t'+n.escapeExpression("function"==typeof(i=null!=(i=c(e,"currentSelection")||(null!=t?c(t,"currentSelection"):t))?i:n.hooks.helperMissing)?i.call(r,{name:"currentSelection",hash:{},data:a,loc:{start:{line:6,column:4},end:{line:6,column:24}}}):i)+'\n\t\t\t</p>\n\t\t\t<svg class="icon icon-dropdown_arrow fluid-selection-dropdown-arrow">\n\t\t\t\t<use xlink:href="#icon-dropdown_arrow"></use>\n\t\t\t</svg>\n\t\t</div>\n\t</div>\n\t<div class="fluid-selection-options-container">\n'+(null!=(o=c(e,"each").call(r,null!=t?c(t,"dropDownOptions"):t,{name:"each",hash:{},fn:n.program(1,a,0),inverse:n.noop,data:a,loc:{start:{line:14,column:2},end:{line:22,column:11}}}))?o:"")+"\t</div>\n</div>"},useData:!0}),l={};n.Array.each([],(function(t){var e=n.Template.get("hermes/"+t);e&&(l[t]=e)})),n.Template.register("hermes/fluid-selection-dropdown",(function(t,a){return(a=a||{}).partials=a.partials?n.merge(l,a.partials):l,e(t,a)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("fluid-selection-dropdown-view",(function(e,t){"use strict";var i=require("hermes-core/flog")(t);e.namespace("Views").FluidSelectionDropdown=e.FlickrView.create(this.name,e.FlickrView,[],{initializer:function(e){e.viewConfig?(this.params=e,this.showSelectionTopBar=!1,this.staticTopBarMessage="",this.dropDownOptions={},this.currentSelectionString="",this.currentSelectionArray=[],this.isLocked=!1,this.scrollListen=!0,this.setConfiguration(this.params.viewConfig),this.buildContainer()):i.error("No configuration was given!")},buildContainer:function(){return this.setContainerWithTemplate("fluid-selection-dropdown",{dropDownOptions:this.getDropDownOptions(),currentSelection:this.currentSelectionString}),this.activate(),this},activate:function(){return this.setElementInAnchorContainer(),this.setDropdownArrowListener(),this.setDropDownOptionListener(),this.updateLockState(),this},setConfiguration:function(e){"viewAnchor"in e&&"object"==typeof e.viewAnchor?this.viewAnchor=e.viewAnchor:i.error("Dropdown needs a node anchor element"),"staticTopBarMessage"in e&&"string"==typeof e.staticTopBarMessage?this.staticTopBarMessage=e.staticTopBarMessage:"showSelectionTopBar"in e&&"boolean"==typeof e.showSelectionTopBar&&(this.showSelectionTopBar=e.showSelectionTopBar),this.setDropDownOptions(e),this.setInitialTopBarState()},setDropDownOptions:function(e){e.dropDownOptions?Array.isArray(e.dropDownOptions)?e.dropDownOptions.length<2?i.error("Dropdown options array needs at least two options"):this.dropDownOptions=e.dropDownOptions:i.error("Dropdown options param is not an array. Must be an array"):i.error("There are no dropdown options")},setInitialTopBarState:function(){var e,t=this;e=this.getDropDownOptions().filter((function(e){return e.isSelected&&t.currentSelectionArray.push(e),e.isSelected})).map((e=>e.name)).join(", "),1===this.currentSelectionArray.length&&(this.isLocked=!0),this.showSelectionTopBar?this.currentSelectionString=e:this.currentSelectionString=this.staticTopBarMessage},setDropdownArrowListener:function(){this.registerEventHandler(this.get("container").one(".current-value-container").on("click",this.toggleArrow.bind(this)))},setDropDownOptionListener:function(){this.registerEventHandler(this.get("container").one(".fluid-selection-options-container").delegate("click",this.updateOptionsState.bind(this),".individual-option-container"))},setElementInAnchorContainer:function(){var e=this.get("container");this.viewAnchor.appendChild(e)},updateLockState:function(){var e;this.currentSelectionArray.length&&(e=this.getCurrentSelectionId(),this.get("container").all(`.option-${e}`).toggleClass("locked",this.isLocked))},getCurrentSelectionId:function(){return this.currentSelectionArray[0].id},updateOptionsState:function(t){var i=this.getDropDownOptions()[t.currentTarget.getAttribute("data-id")];if(this.isLocked){if(!1!==i.isSelected)return;this.isLocked=!1,this.updateLockState()}t.currentTarget.get("firstElementChild").get("checked")?t.currentTarget.get("firstElementChild").set("checked",!1):t.currentTarget.get("firstElementChild").set("checked",!0),i.isSelected=!i.isSelected,this.updateTopBarState(i),e.fire("selection-dropdown:valueChange",i)},updateTopBarState:function(e){var t,i=this.get("container").one(".current-value");e.isSelected?(this.currentSelectionArray.push(e),this.currentSelectionArray.sort(((e,t)=>e.id-t.id))):(t=this.currentSelectionArray.findIndex((t=>t.alias===e.alias)),this.currentSelectionArray.splice(t,1)),this.showSelectionTopBar&&(this.currentSelectionString=this.currentSelectionArray.map((e=>e.name)).join(", "),i.set("innerHTML",this.currentSelectionString)),1===this.currentSelectionArray.length&&(this.isLocked=!0,this.updateLockState())},toggleArrow:function(){this.dropdownIsOpen?this.close():this.open()},getDropDownOptions:function(){return this.dropDownOptions},open:function(){var t=this.get("container"),i=t.one(".fluid-selection-options-container"),n=t.one(".fluid-selection-dropdown-container");this.dropdownIsOpen||(i.setStyle("display","block"),n.addClass("open"),t.setStyle("display","block"),t.addClass("open"),this.dropdownIsOpen=!0,this.overlayId=this.appContext.overlayManager.push({view:this,dismissOnOverlayClick:!0,disableBodyScroll:!1,dismissOnEsc:!0,popBeforePushOther:!0,hideOverlay:!0}),this.appContext.overlayManager.placeViewAfterOverlay(this.overlayId),e.fire("selection-dropdown:open"))},close:function(){var t=this.get("container"),i=t.one(".fluid-selection-options-container"),n=t.one(".fluid-selection-dropdown-container");return this.dropdownIsOpen&&(i.setStyle("display","none"),n.removeClass("open"),this.dropdownIsOpen=!1,this.appContext.overlayManager.pop(this.overlayId),e.fire("selection-dropdown:close")),this.getDropDownOptions()}},{ATTRS:{}})}),"@VERSION@",{requires:["flickr-view","hermes-template-fluid-selection-dropdown"],optionalRequires:["fluid","hermes-core"]});