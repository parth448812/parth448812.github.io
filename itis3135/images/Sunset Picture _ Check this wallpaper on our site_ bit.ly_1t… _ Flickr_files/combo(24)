YUI.add("hermes-template-photo-well-scrappy",(function(n,l){var e=n.Template.Handlebars.revive({1:function(n,l,e,t,a){return" enable-zoom"},3:function(n,l,e,t,a){return" no-click"},5:function(n,l,e,t,a){return" is-hidden"},7:function(n,l,e,t,a){var o,r=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return n.escapeExpression("function"==typeof(o=null!=(o=r(e,"prev-url")||(null!=l?r(l,"prev-url"):l))?o:n.hooks.helperMissing)?o.call(null!=l?l:n.nullContext||{},{name:"prev-url",hash:{},data:a,loc:{start:{line:3,column:143},end:{line:3,column:155}}}):o)},9:function(n,l,e,t,a){return"#"},11:function(n,l,e,t,a){var o,r=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return n.escapeExpression("function"==typeof(o=null!=(o=r(e,"prev-title")||(null!=l?r(l,"prev-title"):l))?o:n.hooks.helperMissing)?o.call(null!=l?l:n.nullContext||{},{name:"prev-title",hash:{},data:a,loc:{start:{line:3,column:196},end:{line:3,column:210}}}):o)},13:function(n,l,e,t,a){var o,r=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return n.escapeExpression("function"==typeof(o=null!=(o=r(e,"next-url")||(null!=l?r(l,"next-url"):l))?o:n.hooks.helperMissing)?o.call(null!=l?l:n.nullContext||{},{name:"next-url",hash:{},data:a,loc:{start:{line:8,column:143},end:{line:8,column:155}}}):o)},15:function(n,l,e,t,a){var o,r=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return n.escapeExpression("function"==typeof(o=null!=(o=r(e,"next-title")||(null!=l?r(l,"next-title"):l))?o:n.hooks.helperMissing)?o.call(null!=l?l:n.nullContext||{},{name:"next-title",hash:{},data:a,loc:{start:{line:8,column:197},end:{line:8,column:211}}}):o)},17:function(n,l,e,t,a){var o=null!=l?l:n.nullContext||{},r=n.hooks.helperMissing,i=n.escapeExpression,u=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return"\t\t"+i((u(e,"outlet")||l&&u(l,"outlet")||r).call(o,null!=l?u(l,"photo-sidebar-toggle-view"):l,{name:"outlet",hash:{},data:a,loc:{start:{line:11,column:2},end:{line:11,column:38}}}))+"\n\t\t"+i((u(e,"outlet")||l&&u(l,"outlet")||r).call(o,null!=l?u(l,"attribution-view"):l,{name:"outlet",hash:{},data:a,loc:{start:{line:12,column:2},end:{line:12,column:29}}}))+"\n\t\t"+i((u(e,"outlet")||l&&u(l,"outlet")||r).call(o,null!=l?u(l,"people-notes-view"):l,{name:"outlet",hash:{},data:a,loc:{start:{line:13,column:2},end:{line:13,column:30}}}))+"\n\t\t"+i((u(e,"outlet")||l&&u(l,"outlet")||r).call(o,null!=l?u(l,"photo-engagement-view"):l,{name:"outlet",hash:{},data:a,loc:{start:{line:14,column:2},end:{line:14,column:34}}}))+"\n"},19:function(n,l,e,t,a){var o,r=null!=l?l:n.nullContext||{},i=n.hooks.helperMissing,u="function",c=n.escapeExpression,s=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return"\t\t<a class='entry-type do-not-evict' href='"+c(typeof(o=null!=(o=s(e,"entryURL")||(null!=l?s(l,"entryURL"):l))?o:i)===u?o.call(r,{name:"entryURL",hash:{},data:a,loc:{start:{line:18,column:43},end:{line:18,column:55}}}):o)+'\'><div class="icon"></div> '+c(typeof(o=null!=(o=s(e,"backToLabel")||(null!=l?s(l,"backToLabel"):l))?o:i)===u?o.call(r,{name:"backToLabel",hash:{},data:a,loc:{start:{line:18,column:82},end:{line:18,column:97}}}):o)+"</a>\n"},compiler:[8,">= 4.3.0"],main:function(n,l,e,t,a){var o,r,i=null!=l?l:n.nullContext||{},u=n.hooks.helperMissing,c="function",s=n.escapeExpression,p=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return'<div class="height-controller'+(null!=(o=p(e,"if").call(i,null!=l?p(l,"enableZoom"):l,{name:"if",hash:{},fn:n.program(1,a,0),inverse:n.noop,data:a,loc:{start:{line:1,column:29},end:{line:1,column:66}}}))?o:"")+'" style="height: '+s(typeof(r=null!=(r=p(e,"height")||(null!=l?p(l,"height"):l))?r:u)===c?r.call(i,{name:"height",hash:{},data:a,loc:{start:{line:1,column:83},end:{line:1,column:93}}}):r)+'px;">\n\n\t<a class="navigate-target navigate-prev'+(null!=(o=p(e,"if").call(i,null!=l?p(l,"prev-is-not-clickable"):l,{name:"if",hash:{},fn:n.program(3,a,0),inverse:n.noop,data:a,loc:{start:{line:3,column:40},end:{line:3,column:85}}}))?o:"")+(null!=(o=p(e,"if").call(i,null!=l?p(l,"is-hidden"):l,{name:"if",hash:{},fn:n.program(5,a,0),inverse:n.noop,data:a,loc:{start:{line:3,column:85},end:{line:3,column:119}}}))?o:"")+'" href="'+(null!=(o=p(e,"if").call(i,null!=l?p(l,"prev-url"):l,{name:"if",hash:{},fn:n.program(7,a,0),inverse:n.program(9,a,0),data:a,loc:{start:{line:3,column:127},end:{line:3,column:171}}}))?o:"")+'" title="'+(null!=(o=p(e,"if").call(i,null!=l?p(l,"prev-url"):l,{name:"if",hash:{},fn:n.program(11,a,0),inverse:n.noop,data:a,loc:{start:{line:3,column:180},end:{line:3,column:217}}}))?o:"")+'" data-track="prevPhotoButtonClick" data-action="ad" style="height: '+s(typeof(r=null!=(r=p(e,"navHeight")||(null!=l?p(l,"navHeight"):l))?r:u)===c?r.call(i,{name:"navHeight",hash:{},data:a,loc:{start:{line:3,column:285},end:{line:3,column:298}}}):r)+'px;"><span class="hide-text">&larr;</span></a>\n\n\t'+s((p(e,"outlet")||l&&p(l,"outlet")||u).call(i,null!=l?p(l,"photo-well-media-view"):l,{name:"outlet",hash:{},data:a,loc:{start:{line:5,column:1},end:{line:5,column:33}}}))+"\n\t"+s((p(e,"outlet")||l&&p(l,"outlet")||u).call(i,null!=l?p(l,"photo-notes-scrappy-view"):l,{name:"outlet",hash:{},data:a,loc:{start:{line:6,column:1},end:{line:6,column:36}}}))+'\n\n\t<a class="navigate-target navigate-next'+(null!=(o=p(e,"if").call(i,null!=l?p(l,"next-is-not-clickable"):l,{name:"if",hash:{},fn:n.program(3,a,0),inverse:n.noop,data:a,loc:{start:{line:8,column:40},end:{line:8,column:85}}}))?o:"")+(null!=(o=p(e,"if").call(i,null!=l?p(l,"is-hidden"):l,{name:"if",hash:{},fn:n.program(5,a,0),inverse:n.noop,data:a,loc:{start:{line:8,column:85},end:{line:8,column:119}}}))?o:"")+'" href="'+(null!=(o=p(e,"if").call(i,null!=l?p(l,"next-url"):l,{name:"if",hash:{},fn:n.program(13,a,0),inverse:n.program(9,a,0),data:a,loc:{start:{line:8,column:127},end:{line:8,column:171}}}))?o:"")+'"  title="'+(null!=(o=p(e,"if").call(i,null!=l?p(l,"next-url"):l,{name:"if",hash:{},fn:n.program(15,a,0),inverse:n.noop,data:a,loc:{start:{line:8,column:181},end:{line:8,column:218}}}))?o:"")+'" data-track="nextPhotoButtonClick" data-action="ad" style="height: '+s(typeof(r=null!=(r=p(e,"navHeight")||(null!=l?p(l,"navHeight"):l))?r:u)===c?r.call(i,{name:"navHeight",hash:{},data:a,loc:{start:{line:8,column:286},end:{line:8,column:299}}}):r)+'px;"><span class="hide-text">&rarr;</span></a>\n\n'+(null!=(o=p(e,"unless").call(i,null!=l?p(l,"is-ad"):l,{name:"unless",hash:{},fn:n.program(17,a,0),inverse:n.noop,data:a,loc:{start:{line:10,column:1},end:{line:15,column:12}}}))?o:"")+"\n"+(null!=(o=p(e,"unless").call(i,null!=l?p(l,"hideBackToLink"):l,{name:"unless",hash:{},fn:n.program(19,a,0),inverse:n.noop,data:a,loc:{start:{line:17,column:1},end:{line:19,column:12}}}))?o:"")+"\n\t"+s((p(e,"outlet")||l&&p(l,"outlet")||u).call(i,null!=l?p(l,"context-slider-view"):l,{name:"outlet",hash:{},data:a,loc:{start:{line:21,column:1},end:{line:21,column:31}}}))+"\n</div>\n"},useData:!0}),t={};n.Array.each([],(function(l){var e=n.Template.get("hermes/"+l);e&&(t[l]=e)})),n.Template.register("hermes/photo-well-scrappy",(function(l,a){return(a=a||{}).partials=a.partials?n.merge(t,a.partials):t,e(l,a)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-photo-page-right-size-express",(function(t,e){var n=t.Template.Handlebars.revive({compiler:[8,">= 4.3.0"],main:function(t,e,n,o,i){var h,a=null!=e?e:t.nullContext||{},l=t.hooks.helperMissing,r="function",p=t.escapeExpression,d=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'\n<script type="text/javascript" nonce="'+p(typeof(h=null!=(h=d(n,"cspNonce")||(null!=e?d(e,"cspNonce"):e))?h:l)===r?h.call(a,{name:"cspNonce",hash:{},data:i,loc:{start:{line:12,column:38},end:{line:12,column:50}}}):h)+'">\n\n\t(function(){\n\n\t\tvar PADDING_HORIZONTAL = 40;\n\n\t\twindow.getPhotoWellHeight = function () {\n\n\t\t\tvar minHeight = 500,\n\t\t\t    winWidth = window.innerWidth,\n\t\t\t    winHeight = window.innerHeight - 50,  \n\t\t\t    ratioNarrow = 1,\n\t\t\t    ratioRegular = 2.3,\n\t\t\t    ratioTransitional = 2.75,\n\t\t\t    idealSubphotoHeight = 120,\n\t\t\t    breakHeightNarrow = (winWidth / ratioNarrow) + idealSubphotoHeight,\n\t\t\t    breakHeightRegular = (winWidth / ratioRegular) + idealSubphotoHeight,\n\t\t\t    breakHeightTransitional = winWidth / ratioTransitional,\n\t\t\t    newPhotoWellHeight;\n\n\t\t\tif (winHeight > breakHeightNarrow) {\n\n\t\t\t\tnewPhotoWellHeight = winWidth / ratioNarrow;\n\n\t\t\t} else if (winHeight > breakHeightRegular) {\n\n\t\t\t\tnewPhotoWellHeight = winHeight - idealSubphotoHeight;\n\n\t\t\t} else if (winHeight > breakHeightTransitional) {\n\n\t\t\t\tnewPhotoWellHeight = winHeight - idealSubphotoHeight + idealSubphotoHeight * (winHeight - breakHeightRegular) / (breakHeightTransitional - breakHeightRegular);\n\n\t\t\t} else {\n\n\t\t\t\tnewPhotoWellHeight = winHeight;\n\n\t\t\t}\n\n\t\t\treturn Math.max(minHeight, Math.round(newPhotoWellHeight));\n\n\t\t}\n\n\t\tfunction domReady () {\n\n\t\t\ttry {\n\n\t\t\t\tif (document.getElementsByClassName("main-photo")[0]) {\n\n\t\t\t\t\tvar photoWellView = document.querySelector(".photo-well-scrappy-view"),\n\t\t\t\t\t    heightController = photoWellView.getElementsByClassName("height-controller")[0],\n\t\t\t\t\t    photoWellMediaView = document.querySelector(".photo-well-media-scrappy-view"),\n\t\t\t\t\t    photoImageElement = photoWellMediaView.getElementsByClassName("main-photo")[0],\n\t\t\t\t\t    photoWidth = '+p(typeof(h=null!=(h=d(n,"photoWidth")||(null!=e?d(e,"photoWidth"):e))?h:l)===r?h.call(a,{name:"photoWidth",hash:{},data:i,loc:{start:{line:100,column:22},end:{line:100,column:36}}}):h)+",\n\t\t\t\t\t    photoHeight = "+p(typeof(h=null!=(h=d(n,"photoHeight")||(null!=e?d(e,"photoHeight"):e))?h:l)===r?h.call(a,{name:"photoHeight",hash:{},data:i,loc:{start:{line:101,column:23},end:{line:101,column:38}}}):h)+',\n\t\t\t\t\t    photoAspectRatio = photoWidth / photoHeight,\n\t\t\t\t\t    photoWellHeight = window.getPhotoWellHeight(),\n\t\t\t\t\t    photoWellMediaViewPadding = {\n\t\t\t\t\t        top: parseInt(getComputedStyle(photoWellMediaView)[\'paddingTop\'].match(/[0-9]+/)[0], 10),\n\t\t\t\t\t        right: PADDING_HORIZONTAL,\n\t\t\t\t\t        bottom: parseInt(getComputedStyle(photoWellMediaView)[\'paddingBottom\'].match(/[0-9]+/)[0], 10),\n\t\t\t\t\t        left: PADDING_HORIZONTAL\n\t\t\t\t\t    },\n\t\t\t\t\t    canvasSize = {\n\t\t\t\t\t        height: photoWellHeight - photoWellMediaViewPadding.top - photoWellMediaViewPadding.bottom,\n\t\t\t\t\t        width: window.innerWidth - photoWellMediaViewPadding.left - photoWellMediaViewPadding.right\n\t\t\t\t\t    };\n\n\t\t\t\t\theightController.style.height = photoWellHeight + "px";\n\n\t\t\t\t\tif (photoWidth <= canvasSize.width && photoHeight <= canvasSize.height) {\n\t\t\t\t\t\tphotoImageElement.style.height = photoHeight + "px";\n\t\t\t\t\t\tphotoImageElement.style.width = photoWidth + "px";\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (photoAspectRatio < 1 || Math.round(canvasSize.width / photoAspectRatio) > canvasSize.height) {\n\t\t\t\t\t\t\tphotoImageElement.style.height = canvasSize.height + "px";\n\t\t\t\t\t\t\tphotoImageElement.style.width = Math.round(canvasSize.height * photoAspectRatio) + "px";\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tphotoImageElement.style.height = Math.round(canvasSize.width / photoAspectRatio) + "px";\n\t\t\t\t\t\t\tphotoImageElement.style.width = canvasSize.width + "px";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t} catch (e) {\n\t\t\t\tif (window.sendRequest) {\n\t\t\t\t\twindow.sendRequest(\'flickr.hermes.photoDimensionCorrectionError\', \'There was a JS error when trying to correct a server rendered photo.\');\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\n\t\tif (document.readyState !== \'loading\') {\n\t\t\tdomReady();\n\t\t} else {\n\t\t\tdocument.addEventListener(\'DOMContentLoaded\', domReady);\n\t\t}\n\n\t}());\n\n<\/script>\n'},useData:!0}),o={};t.Array.each([],(function(e){var n=t.Template.get("hermes/"+e);n&&(o[e]=n)})),t.Template.register("hermes/photo-page-right-size-express",(function(e,i){return(i=i||{}).partials=i.partials?t.merge(o,i.partials):o,n(e,i)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-vr-overlay",(function(e,a){var r=e.Template.Handlebars.revive({compiler:[8,">= 4.3.0"],main:function(e,a,r,t,s){return'<a class="close"><span></span></a>'},useData:!0}),t={};e.Array.each([],(function(a){var r=e.Template.get("hermes/"+a);r&&(t[a]=r)})),e.Template.register("hermes/vr-overlay",(function(a,s){return(s=s||{}).partials=s.partials?e.merge(t,s.partials):t,r(a,s)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-flickr-balls",(function(e,l){var a=e.Template.Handlebars.revive({1:function(e,l,a,r,n){return" block"},compiler:[8,">= 4.3.0"],main:function(e,l,a,r,n){var t,i=e.lookupProperty||function(e,l){if(Object.prototype.hasOwnProperty.call(e,l))return e[l]};return'<div class="balls '+(null!=(t=i(a,"if").call(null!=l?l:e.nullContext||{},null!=l?i(l,"isBlock"):l,{name:"if",hash:{},fn:e.program(1,n,0),inverse:e.noop,data:n,loc:{start:{line:1,column:18},end:{line:1,column:46}}}))?t:"")+'">\n\t<div class="blue ball"></div><div class="pink ball"></div>\n</div>'},useData:!0}),r={};e.Array.each([],(function(l){var a=e.Template.get("hermes/"+l);a&&(r[l]=a)})),e.Template.register("hermes/flickr-balls",(function(l,n){return(n=n||{}).partials=n.partials?e.merge(r,n.partials):r,a(l,n)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("flickr-photos-removeTag-deletor",(function(o,e){"use strict";o.namespace("ModelDeletors")["flickr-photos-removeTag"]={run:function(r,t){var i={};return"string"==typeof r?i.tag_id=r:"object"==typeof r&&(i.global_tag_ids=r.globalTagIds.join(","),i.photo_ids=r.photoIds.join(",")),t.callAPI("flickr.photos.removeTag",i).then(null,o.FetcherErrorLogger(e))}}}),"@VERSION@",{requires:["flickr-promise"],optional:[]});YUI.add("tag-models",(function(t){function e(t){e.superclass.constructor.call(this,t)}t.Models[this.name]=e,t.extend(e,t.FlickrModelRegistry,{name:this.name,remote:{create:function(e){return t.ModelCreators["flickr-photos-addTags"].run(e,this.appContext)},delete:function(e){return t.ModelDeletors["flickr-photos-removeTag"].run(e,this.appContext)}},attributes:{tagValue:{validator:function(e){return t.AttributeHelpers.validateString(e)},setter:function(e){return t.AttributeHelpers.coerceString(e.trim().replace(/\s/g,""))}},tagRaw:{validator:function(e){return t.AttributeHelpers.validateString(e)},setter:function(e){return t.AttributeHelpers.coerceString(e)}},tagAuthorNSID:{},isMachineTag:{validator:function(e){return t.AttributeHelpers.validateBoolean(e)},setter:function(e){return t.AttributeHelpers.coerceBoolean(e)},defaultValue:!1},url:{derivedBy:["tagValue"],readOnly:!0,defaultFn:function(t){var e=this.getValue(t,"tagValue");return e?"/photos/tags/"+e:void 0}},searchUrl:{derivedBy:["tagValue","tagRaw","isMachineTag"],readOnly:!0,defaultFn:function(t){var e,r=this.getValue(t,"tagRaw"),a=this.getValue(t,"tagValue"),i=this.getValue(t,"isMachineTag");return r&&i?(r.indexOf(" ")>0&&(e=r.indexOf("=")+1,r=r.substring(0,e)+'"'+r.substring(e)+'"'),"/search/?tags="+r):a?"/search/?tags="+a:void 0}},duplicateAutotagId:{validator:function(e){return t.AttributeHelpers.validateString(e)},setter:function(e){return t.AttributeHelpers.coerceString(e)}}}})}),"@VERSION@",{requires:["flickr-model-registry","flickr-photos-addTags-creator","flickr-photos-removeTag-deletor"]});YUI.add("flickr-tags-getListPhoto-fetcher",(function(t,o){"use strict";t.namespace("ModelFetchers")["flickr-tags-getListPhoto"]={run:function(a,e){var s=a.id,g={photo_id:s,extras:"autotags",lang:e.lang},r=this;return t.Promise.all([e.callAPI("flickr.tags.getListPhoto",g),e.getModelRegistry("photo-tags-models"),e.getModelRegistry("tag-models"),e.getModelRegistry("photo-autotags-models"),e.getModelRegistry("autotag-models")]).then((function(t){return r._processResponse(t,s,e.flipper,e)}),t.FetcherErrorLogger(o))},_processResponse:function(o,a,e,s){var g,r=o[0],i=o[1],n=o[2],p=r.photo&&r.photo.tags&&void 0!==r.photo.tags.tag?r.photo.tags.tag.length:0,u=[],d=o[3],h=o[4],l=0,c=[];return p>0&&t.Array.each(r.photo.tags.tag,(function(t){"string"==typeof t.content&&u.push(n.addOrUpdate({id:t.id,tagRaw:t.raw,tagValue:t.content,tagAuthorNSID:t.author,isMachineTag:t.machineTag,duplicateAutotagId:t.duplicateAutotag}))})),i.exists(a)?i.setValue(a,"tags",u):i.add({id:a,tags:u}),g={id:a},r.photo&&r.photo.autotags&&void 0!==r.photo.autotags.autotag&&(l=r.photo.autotags.autotag.length),l>0&&t.Array.each(r.photo.autotags.autotag,(function(t){"string"==typeof t.content&&c.push(h.addOrUpdate({id:t.id,autotagValue:t.content,score:t.confidence,isPrivate:t.private}))})),g.autotags={page:1,perPage:1e3,pageContent:c,totalItems:l},d.exists(a)?d.setValue(a,"autotags",g.autotags):d.add(g),i.proxy(a)}}}),"@VERSION@",{requires:["flickr-promise","api-helper"],optional:["tag-models","photo-tags-models"]});